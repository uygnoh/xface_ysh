/*******************************************************************************
        => AVR单片机
*******************************************************************************/

        avrdude 下载器软件
//_________________________________________________________
sudo apt-get install gcc-avr avr-libc avrdude



        USBASP 下载器
//_________________________________________________________
USBASP是一种基于ATMEL公司的AVR系列RISC单片机的高性价比和一个由纯软件
的USB通信协议栈而构成的一个可以向51系列,AVR系列单片机下载(烧写)程序的
下载器.支持AT89S51、AT89S52和AVR全系列单片机的程序下载，速度更快，更稳定



        AT89S51, AT89S52 系列单片机与USBASP-ISP下载器连接
//_________________________________________________________
        |//USBasp          at89s52    |
        |_____________________________|
        |  MOSI    <===>    P1.5      |
        |  MISO    <===>    P1.6      |
        |  SCK     <===>    P1.7      |
        |  RES     <===>    RST       |
        |  GND     <===>    GND       |
        |  5V      <===>    VCC       |
        |_____________________________|



/*******************************************************************************
        => arduino 与 avrdude 为ATmega328p烧写程序
*******************************************************************************/
#define F_CPU                   (8000000UL)     //8MHz
#include <avr/io328p.h>
#include <utill/delay.h>
int main(void)
{
        DDRD = 0b11111111;
        while (1) {
                PORTD = 0b00000001;
                __delay_ms(500);
                PORTD = 0b00000000;
                __delay_ms(500);
        }
}

// 使用arduino（作为烧写器）为atmega328p烧写程序
//_________________________________________________________
// 第 1 步
   Arduino-IDE ->Tools ->Port ->选择CH340端口（串口）
// 第 2 步
   Arduino-IDE ->File ->examples ->11. ArduinoISP ->ArduinoISP
   打开这个文件，然后把它上传到Arduino中。  这时Arduino已经变成了一个烧写器了。
// 第 3 步
   使用（AVRDUDE）这个工具为atmega328p烧写程序



/*******************************************************************************
        => avrdude
*******************************************************************************/
avrdude -c arduino -P COM1 -b 115200 -p atmega328p -D -U flash:w:objs/blink.hex:i

sudo avrdude -P usb -p m16 -c usbasp -t

avrdude> part




/*******************************************************************************
        => atmega328 变成 Arduino
*******************************************************************************/
        // 第一步： 使用arduino（作为烧写器）
        //_________________________________________________________
        Arduino-UNO                  DIY-Board
        MISO    <---------------->   MISO
        MOSI    <---------------->   MOSI
        VCC     <---------------->   VCC
        GND     <---------------->   GND
        RST (不接)                    RST 连接Arduino-UNO 的 D10



        // 第二步： 把 BootLoder 写入目标开发板中
        // 此时目标开发板就变成了一个 Arduino 
        //_________________________________________________________
        1    开发板： Arduino Nano
        2    处理器： ATmega328p (Old Bootloader)
        3    串口:   Arduino/Genuino Uno
        4    编程器： Arduino as ISP
        5    烧录引导程序



